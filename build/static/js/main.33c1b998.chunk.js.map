{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Person.js","components/Persons.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["Filter","filter","changeHandler","value","onChange","PersonForm","onSubmit","name","number","type","Person","person","onClick","Persons","personsToShow","map","baseUrl","axios","get","then","response","data","newObject","post","id","url","concat","delete","put","Notification","messages","errors","className","length","message","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","setFilter","setErrors","setMessages","toLowerCase","includes","useEffect","personService","event","target","preventDefault","push","find","newPerson","window","confirm","returnedPerson","item","catch","error","console","log","setTimeout","newPersonsList","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.33c1b998.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Filter = ({filter, changeHandler}) =>{\r\n    return(\r\n    <div>\r\n        filter shown with <input value={filter} onChange={changeHandler} />\r\n    </div>\r\n    )\r\n}\r\n\r\nexport default Filter;","import React from 'react';\r\n\r\nconst PersonForm = ({onSubmit, name, number}) =>{\r\n    return(\r\n        <form onSubmit={onSubmit}>\r\n        <div>\r\n          name: <input value={name.value} onChange={name.onChange} />\r\n        </div>\r\n        <div>\r\n          number: <input value={number.value} onChange={number.onChange} />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    )\r\n}\r\n\r\nexport default PersonForm","import React from \"react\";\r\n\r\nconst Person = ({ person, onClick }) => {\r\n\r\n  return (\r\n    <div>\r\n      {person.name} {person.number} <button onClick={()=>onClick(person)}>delete</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Person;\r\n","import React from 'react';\r\nimport Person from './Person'\r\n\r\nconst Persons = ({personsToShow, onClick}) => {\r\n    return(\r\n        personsToShow.map((person) => {\r\n            return (\r\n                <Person key={person.name} person={person} onClick={onClick}/>\r\n            );\r\n          })\r\n    )\r\n}\r\n\r\nexport default Persons;","import axios from \"axios\";\r\n\r\n// Currently only works when in the same address as backend\r\n// proxy server won't solve this issue as json-server does not allow\r\n// to add the api prefix\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst create = (newObject) => {\r\n  const request = axios.post(baseUrl, newObject);\r\n  return request.then(response => {\r\n    return response.data\r\n  });\r\n};\r\n\r\nconst deleteName = (id) =>{\r\n  const url=baseUrl.concat(`/${id}`)\r\n  return axios.delete(url);\r\n}\r\n\r\nconst update = (id, newObject) =>{\r\n  const url=baseUrl.concat(`/${id}`)\r\n  const request = axios.put(url, newObject)\r\n  return request.then(response =>response.data)\r\n}\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default { getAll, create , deleteName , update};\r\n","import React from \"react\";\r\n\r\nconst Notification = ({ messages, errors}) => {\r\n  if (messages === [] && errors===[]) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <ul className={((messages.length>0)? 'notification':'') + ((errors.length>0)? 'alert':'') }>\r\n      {messages.map((message) => {\r\n        return <li key={message}>{message}</li>;\r\n      })}\r\n      {errors.map((message) => {\r\n        return <li key={message}>{message}</li>;\r\n      })}\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default Notification;\r\n","import React, { useEffect, useState } from \"react\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport personService from \"./services/persons\";\nimport Notification from \"./components/Notification\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filter, setFilter] = useState(\"\");\n  const [errors, setErrors] = useState([]);\n  const [messages, setMessages] = useState([]);\n\n  const personsToShow = persons.filter((person) => {\n    return person.name.toLowerCase().includes(filter.toLowerCase());\n  });\n\n  // Use effect to get data form the server and set to variables\n  useEffect(() => {\n    personService.getAll().then((response) => {\n      setPersons(response);\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // onClick handler\n  const handleClick = (person) => {\n    if (window.confirm(`Delete ${person.name}?`)) {\n      // Tell server to delete the user\n      personService.deleteName(person.id).catch((error) => {\n        setMessages([`'${person.name}' was already removed from server`]);\n      });\n      // Update the state to show that the user has been deleted\n      const newPersonsList = persons.filter((persons) => {\n        return persons.name !== person.name;\n      });\n      setPersons(newPersonsList);\n      setMessages([`Deleted ${person.name}`]);\n      setTimeout(() => setMessages([]), 5000);\n    }\n  };\n\n  // onChange handlers\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  };\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  };\n  const handleFilterChange = (event) => {\n    setFilter(event.target.value);\n  };\n\n  // onSubmit handler\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    let errors = [];\n\n    // Check to see if there is an input and check if the name is unique\n    if (newName === \"\") {\n      errors.push(`\\nPlease enter a name`);\n    }\n\n    // Check to see if there is an input and check if the number is unique\n    if (newNumber !== \"\") {\n      if (persons.find((person) => person.number === newNumber)) {\n        errors.push(`\\nphone number ${newNumber} is already being used`);\n      }\n    } else {\n      errors.push(`\\nPlease enter a number`);\n    }\n    // If there are no errors, add the new object and reset state\n    // else, provide the errors\n    // Only resets state when there are no errors, think this is more user friendly\n    if (errors.length === 0) {\n      const newPerson = {\n        name: newName,\n        number: newNumber,\n      };\n      // If the name is already taken, offer to update the number\n      if (persons.find((person) => person.name === newName)) {\n        if (\n          window.confirm(\n            `${newName} is already added to the phonebook, replace the old number with a new one?`\n          )\n        ) {\n          // Returns the object that matches the criteria\n          const person = persons.find((person) => person.name === newName);\n          personService.update(person.id, newPerson).then((returnedPerson) => {\n            setPersons(\n              persons.map((item) =>\n                item.id !== person.id ? item : returnedPerson\n              )\n            );\n            setNewName(\"\");\n            setNewNumber(\"\");\n          });\n          setMessages([`Updated ${person.name}'s number`]);\n        }\n      } else {\n        // Add the new user to the state\n        personService\n          .create(newPerson)\n          .then((person) => {\n            setPersons([...persons, person]);\n            setMessages([`Added ${newPerson.name}`]);\n          })\n          .catch((error) => {\n            errors.push(error.response.data.error);\n            console.log(errors)\n            setErrors(errors)\n          });\n        setNewName(\"\");\n        setNewNumber(\"\");\n      }\n    } else {\n      setErrors(errors);\n    }\n    setTimeout(() => {\n      setErrors([]);\n      setMessages([]);\n    }, 5000);\n    errors = [];\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification messages={messages} errors={errors} />\n      <Filter value={filter} changeHandler={handleFilterChange} />\n      <h2>Add a new person</h2>\n      <PersonForm\n        onSubmit={handleSubmit}\n        name={{ value: newName, onChange: handleNameChange }}\n        number={{ value: newNumber, onChange: handleNumberChange }}\n      />\n      <h2>Numbers</h2>\n      <Persons personsToShow={personsToShow} onClick={handleClick} />\n    </div>\n  );\n};\nexport default App;\n","import ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}